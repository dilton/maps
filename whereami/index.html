<html>
<head>
   <meta charset="utf-8"> 
   <meta name="viewport" content="width=device-width, initial-scale=1"> 
	<title>Javascript geo sample</title>
	<!--<script src="http://code.google.com/apis/gears/gears_init.js" type="text/javascript" charset="utf-8"></script>-->
	<script src="geo.js" type="text/javascript" charset="utf-8"></script>
</head>	
<body>
	<p><button onclick="geoFindMe()">Where Am I</button></p>
	<div id="out"></div>
	<script>
		function geoFindMe() {
		  var output = document.getElementById("out");

		  if (!navigator.geolocation){
			output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
			return;
		  }

	  function success(position) {
		var latitude  = position.coords.latitude;
		var longitude = position.coords.longitude;

		output.innerHTML = '<p>Latitude is ' + latitude + '° <br>Longitude is ' + longitude + '°</p>';

		var img = new Image();
		//img.src = "http://maps.googleapis.com/maps/api/staticmap?center=" + latitude + "," + longitude + "&zoom=20&size=300x300&sensor=false";
		//img.src = "http://maps.googleapis.com/maps/api/staticmap?center="  +mylatlon+"&zoom=14&size=400x300&sensor=false";
		document.location = 'http://maps.google.com/maps?q='+latitude+','+longitude;

		output.appendChild(img);
	  };

	  function error() {
		output.innerHTML = "Unable to retrieve your location";
	  };

	  output.innerHTML = "<p>Locating…</p>";

	  navigator.geolocation.getCurrentPosition(success, error);
	}
	</script>
</body>
</html>